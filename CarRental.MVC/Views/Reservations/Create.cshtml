@model CarRental.MVC.ViewModels.CreateReservationViewModel
@{
    ViewData["Title"] = "Crear Reserva";
    var car = ViewBag.Car as CarRental.MVC.ViewModels.CarViewModel;
}

<div class="container my-5">
    <div class="row">
        <div class="col-lg-6 mb-4">
            <h2 class="mb-4">Detalles del Coche</h2>
            @if (car != null)
            {
                <div class="card">
                    <img src="@(string.IsNullOrEmpty(car.ImageUrl) ? "https://via.placeholder.com/400x300?text=" + car.Brand + "+" + car.Model : car.ImageUrl)" 
                         class="card-img-top" 
                         alt="@car.Brand @car.Model">
                    <div class="card-body">
                        <h4 class="card-title">@car.Brand @car.Model (@car.Year)</h4>
                        <p class="card-text">
                            <span class="badge bg-secondary">@car.Category</span>
                            <span class="badge bg-info text-dark">@car.Passengers pasajeros</span>
                        </p>
                        <h3 class="text-primary">$@car.PricePerDay <small class="text-muted">/ día</small></h3>
                    </div>
                </div>
            }
        </div>
        
        <div class="col-lg-6">
            <h2 class="mb-4">Datos de la Reserva</h2>
            <div class="card">
                <div class="card-body">
                    <form method="post" asp-action="Create">
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger"></div>
                        
                        <input type="hidden" asp-for="CarId" />
                        
                        <div class="mb-3">
                            <label asp-for="StartDate" class="form-label">Fecha de Inicio</label>
                            <input asp-for="StartDate" type="date" class="form-control" min="@DateTime.Now.ToString("yyyy-MM-dd")">
                            <span asp-validation-for="StartDate" class="text-danger"></span>
                        </div>
                        
                        <div class="mb-3">
                            <label asp-for="EndDate" class="form-label">Fecha de Fin</label>
                            <input asp-for="EndDate" type="date" class="form-control" min="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")">
                            <span asp-validation-for="EndDate" class="text-danger"></span>
                        </div>
                        
                        <div class="mb-3">
                            <label asp-for="Notes" class="form-label">Notas (Opcional)</label>
                            <textarea asp-for="Notes" class="form-control" rows="3" placeholder="Agrega cualquier comentario o solicitud especial"></textarea>
                            <span asp-validation-for="Notes" class="text-danger"></span>
                        </div>
                        
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> El precio total se calculará según los días de alquiler.
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-lg w-100">
                            <i class="bi bi-calendar-check"></i> Confirmar Reserva
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mt-4">
        <a href="/Home/Details/@Model.CarId" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Volver
        </a>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
